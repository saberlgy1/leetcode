//å…ƒç´ çš„ é¢‘æ•° æ˜¯è¯¥å…ƒç´ åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚
//
// ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ã€‚åœ¨ä¸€æ­¥æ“ä½œä¸­ï¼Œä½ å¯ä»¥é€‰æ‹© nums çš„ä¸€ä¸ªä¸‹æ ‡ï¼Œå¹¶å°†è¯¥ä¸‹æ ‡å¯¹åº”å…ƒç´ çš„å€¼å¢åŠ  1 ã€‚
//
// æ‰§è¡Œæœ€å¤š k æ¬¡æ“ä½œåï¼Œè¿”å›æ•°ç»„ä¸­æœ€é«˜é¢‘å…ƒç´ çš„ æœ€å¤§å¯èƒ½é¢‘æ•° ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šnums = [1,2,4], k = 5
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šå¯¹ç¬¬ä¸€ä¸ªå…ƒç´ æ‰§è¡Œ 3 æ¬¡é€’å¢æ“ä½œï¼Œå¯¹ç¬¬äºŒä¸ªå…ƒç´ æ‰§ 2 æ¬¡é€’å¢æ“ä½œï¼Œæ­¤æ—¶ nums = [4,4,4] ã€‚
//4 æ˜¯æ•°ç»„ä¸­æœ€é«˜é¢‘å…ƒç´ ï¼Œé¢‘æ•°æ˜¯ 3 ã€‚
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šnums = [1,4,8,13], k = 5
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šå­˜åœ¨å¤šç§æœ€ä¼˜è§£å†³æ–¹æ¡ˆï¼š
//- å¯¹ç¬¬ä¸€ä¸ªå…ƒç´ æ‰§è¡Œ 3 æ¬¡é€’å¢æ“ä½œï¼Œæ­¤æ—¶ nums = [4,4,8,13] ã€‚4 æ˜¯æ•°ç»„ä¸­æœ€é«˜é¢‘å…ƒç´ ï¼Œé¢‘æ•°æ˜¯ 2 ã€‚
//- å¯¹ç¬¬äºŒä¸ªå…ƒç´ æ‰§è¡Œ 4 æ¬¡é€’å¢æ“ä½œï¼Œæ­¤æ—¶ nums = [1,8,8,13] ã€‚8 æ˜¯æ•°ç»„ä¸­æœ€é«˜é¢‘å…ƒç´ ï¼Œé¢‘æ•°æ˜¯ 2 ã€‚
//- å¯¹ç¬¬ä¸‰ä¸ªå…ƒç´ æ‰§è¡Œ 5 æ¬¡é€’å¢æ“ä½œï¼Œæ­¤æ—¶ nums = [1,4,13,13] ã€‚13 æ˜¯æ•°ç»„ä¸­æœ€é«˜é¢‘å…ƒç´ ï¼Œé¢‘æ•°æ˜¯ 2 ã€‚
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//è¾“å…¥ï¼šnums = [3,9,6], k = 2
//è¾“å‡ºï¼š1
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= nums.length <= 105
// 1 <= nums[i] <= 105
// 1 <= k <= 105
//
// Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ å‰ç¼€å’Œ æ»‘åŠ¨çª—å£
// ğŸ‘ 64 ğŸ‘ 0

package com.cute.leetcode.editor.cn;

import java.util.Arrays;

public class FrequencyOfTheMostFrequentElement {
    public static void main(String[] args) {
        Solution solution = new FrequencyOfTheMostFrequentElement().new Solution();
        int[] nums = new int[]{9930, 9923, 9983, 9997, 9934, 9952, 9945, 9914, 9985, 9982, 9970, 9932, 9985, 9902, 9975, 9990, 9922, 9990, 9994, 9937, 9996, 9964, 9943, 9963, 9911, 9925, 9935, 9945, 9933, 9916, 9930, 9938, 10000, 9916, 9911, 9959, 9957, 9907, 9913, 9916, 9993, 9930, 9975, 9924, 9988, 9923, 9910, 9925, 9977, 9981, 9927, 9930, 9927, 9925, 9923, 9904, 9928, 9928, 9986, 9903, 9985, 9954, 9938, 9911, 9952, 9974, 9926, 9920, 9972, 9983, 9973, 9917, 9995, 9973, 9977, 9947, 9936, 9975, 9954, 9932, 9964, 9972, 9935, 9946, 9966};
        //int[] nums = new int[]{3, 9, 6};
        //int[] nums = new int[]{1, 2, 4};
        //int[] nums = new int[]{9926, 9960, 10000, 9992, 9917, 9986, 9934, 9985, 9977, 9950, 9922, 9913, 9971, 9978, 9984, 9959, 9934, 9948, 9918, 9916, 9967, 9965, 9985, 9977, 9988, 9983, 9900, 9945, 9913, 9966, 9968, 9986, 9939, 9914, 9980, 9957, 9921, 9927, 9917, 9972, 9974, 9953, 9984, 9912, 9975, 9920, 9966, 9932, 9921, 9904, 9928, 9959, 9993, 9937, 9934, 9974, 9937, 9964, 9922, 9963, 9991, 9930, 9944, 9930, 9982, 9980, 9967, 9904, 9955, 9947, 9924, 9973, 9997, 9950, 9905, 9924, 9990, 9947, 9953, 9924, 9977, 9938, 9951, 9982, 9932, 9926, 9928, 9912, 9917, 9929, 9924, 9921, 9987, 9910, 9927, 9921, 9929, 9937, 9919, 9995, 9949, 9953};
        System.out.println(solution.maxFrequency(nums, 3056));
        //System.out.println(solution.maxFrequency(nums, 5));
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        //æ€è·¯ä¸€ï¼šæ’åº+æš´åŠ›æ‰«æ

        /**
         * å¯ä»¥æ€è€ƒä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬æ“ä½œå˜åŒ–çš„å…ƒç´ ä¼šä¸ä¼šè¶…è¿‡æ•°ç»„çš„æœ€å¤§å…ƒç´ 
         * å¦‚æœæˆ‘ä»¬å˜å¤§äº†æœ€å¤§å…ƒç´ ï¼Œä¸”æœ€å¤§å…ƒç´ æ˜¯æœ€é«˜é¢‘æ¬¡å…ƒç´ ï¼Œé‚£å…¶ä½™æ“ä½œéƒ½è¦å› æ­¤å¢åŠ ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‡å®šæˆ‘ä»¬ä¸éœ€è¦å˜å¤§æœ€å¤§å…ƒç´ 
         * è¿™æ ·å°±ç¡®ç«‹äº†ä¸€ä¸ªäºŒåˆ†èŒƒå›´ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„å…ƒç´ å’Œ å’Œæ‰€æœ‰å…ƒç´ çš„å…ƒç´ å’Œ
         * å…ˆç”¨æš´åŠ›æ³•çœ‹ä¸€ä¸‹ï¼Œä¸èµ°äºŒåˆ†ï¼Œç›´æ¥å…¨éƒ¨éå†ä¸€æ¬¡ï¼Œé€šè¿‡å‰ç¼€å’Œ+kä¸å…ƒç´ å€¼* å…ƒç´ æ•°é‡åšæ¯”è¾ƒ, resè¡¨ç¤ºå½“å‰å…ƒç´ 
         * sum[i]+k >=sum[i-res-1] (res+1)*nums[i-1]
         * æ»¡è¶³åˆ™å–å…ƒç´ æ•°é‡
         * ç„¶åé€’å¢resçŸ¥é“res=iå³å¯
         * æœ€åè¿”å›res
         */
       /* public int maxFrequency(int[] nums, int k) {
            Arrays.sort(nums);
            int n = nums.length;
            int res = 1;
            int[] sums = new int[n + 1];
            sums[1] = nums[0];
            for (int i = 2; i <= n; i++) {
                sums[i] = sums[i - 1] + nums[i - 1];
            }
            //iè¡¨ç¤ºiä¸ªå…ƒç´ 
            for (int i = 1; i <= n; i++) {
                //è‡³å°‘èƒ½ä¿è¯res+1ä¸ªå…ƒç´ æ»¡è¶³æ‰æ›´æ–°
                while (res < i && sums[i] + k >= sums[i - res - 1] + (res + 1) * nums[i - 1]) {
                    res++;
                }
            }
            return res;
        }*/

        /**
         * æ€è·¯äºŒï¼šæ€è·¯ä¸€çš„ä¼˜åŒ–
         * whileå¾ªç¯å¯ä»¥ç”¨äºŒåˆ†åšåˆ¤æ–­ä¸Šä¸‹è¾¹ç•Œæ˜¯ å½“å‰res å’Œi
         */
        int[] nums, sum;
        int n, k;
        public int maxFrequency(int[] _nums, int _k) {
            nums = _nums;
            k = _k;
            n = nums.length;
            Arrays.sort(nums);
            sum = new int[n + 1];
            for (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + nums[i - 1];
            int l = 0, r = n;
            while (l < r) {
                int mid = l + r + 1 >> 1;
                if (check(mid)) l = mid;
                else r = mid - 1;
            }
            return r;
        }
        boolean check(int len) {
            for (int l = 0; l + len - 1 < n; l++) {
                int r = l + len - 1;
                int cur = sum[r + 1] - sum[l];
                int t = nums[r] * len;
                if (t - cur <= k) return true;
            }
            return false;
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}