//åŸå¸‚çš„å¤©é™…çº¿æ˜¯ä»è¿œå¤„è§‚çœ‹è¯¥åŸå¸‚ä¸­æ‰€æœ‰å»ºç­‘ç‰©å½¢æˆçš„è½®å»“çš„å¤–éƒ¨è½®å»“ã€‚ç»™ä½ æ‰€æœ‰å»ºç­‘ç‰©çš„ä½ç½®å’Œé«˜åº¦ï¼Œè¯·è¿”å›ç”±è¿™äº›å»ºç­‘ç‰©å½¢æˆçš„ å¤©é™…çº¿ ã€‚
//
// æ¯ä¸ªå»ºç­‘ç‰©çš„å‡ ä½•ä¿¡æ¯ç”±æ•°ç»„ buildings è¡¨ç¤ºï¼Œå…¶ä¸­ä¸‰å…ƒç»„ buildings[i] = [lefti, righti, heighti] è¡¨ç¤ºï¼š
//
//
//
// lefti æ˜¯ç¬¬ i åº§å»ºç­‘ç‰©å·¦è¾¹ç¼˜çš„ x åæ ‡ã€‚
// righti æ˜¯ç¬¬ i åº§å»ºç­‘ç‰©å³è¾¹ç¼˜çš„ x åæ ‡ã€‚
// heighti æ˜¯ç¬¬ i åº§å»ºç­‘ç‰©çš„é«˜åº¦ã€‚
//
//
// å¤©é™…çº¿ åº”è¯¥è¡¨ç¤ºä¸ºç”± â€œå…³é”®ç‚¹â€ ç»„æˆçš„åˆ—è¡¨ï¼Œæ ¼å¼ [[x1,y1],[x2,y2],...] ï¼Œå¹¶æŒ‰ x åæ ‡ è¿›è¡Œ æ’åº ã€‚å…³é”®ç‚¹æ˜¯æ°´å¹³çº¿æ®µçš„å·¦ç«¯ç‚¹ã€‚
//åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªç‚¹æ˜¯æœ€å³ä¾§å»ºç­‘ç‰©çš„ç»ˆç‚¹ï¼Œy åæ ‡å§‹ç»ˆä¸º 0 ï¼Œä»…ç”¨äºæ ‡è®°å¤©é™…çº¿çš„ç»ˆç‚¹ã€‚æ­¤å¤–ï¼Œä»»ä½•ä¸¤ä¸ªç›¸é‚»å»ºç­‘ç‰©ä¹‹é—´çš„åœ°é¢éƒ½åº”è¢«è§†ä¸ºå¤©é™…çº¿è½®å»“çš„ä¸€éƒ¨åˆ†ã€‚
//
// æ³¨æ„ï¼šè¾“å‡ºå¤©é™…çº¿ä¸­ä¸å¾—æœ‰è¿ç»­çš„ç›¸åŒé«˜åº¦çš„æ°´å¹³çº¿ã€‚ä¾‹å¦‚ [...[2 3], [4 5], [7 5], [11 5], [12 7]...] æ˜¯ä¸æ­£ç¡®çš„ç­”
//æ¡ˆï¼›ä¸‰æ¡é«˜åº¦ä¸º 5 çš„çº¿åº”è¯¥åœ¨æœ€ç»ˆè¾“å‡ºä¸­åˆå¹¶ä¸ºä¸€ä¸ªï¼š[...[2 3], [4 5], [12 7], ...]
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šbuildings = [[2,9,10],[3,7,15],[5,12,12],[15,20,10],[19,24,8]]
//è¾“å‡ºï¼š[[2,10],[3,15],[7,12],[12,0],[15,10],[20,8],[24,0]]
//è§£é‡Šï¼š
//å›¾ A æ˜¾ç¤ºè¾“å…¥çš„æ‰€æœ‰å»ºç­‘ç‰©çš„ä½ç½®å’Œé«˜åº¦ï¼Œ
//å›¾ B æ˜¾ç¤ºç”±è¿™äº›å»ºç­‘ç‰©å½¢æˆçš„å¤©é™…çº¿ã€‚å›¾ B ä¸­çš„çº¢ç‚¹è¡¨ç¤ºè¾“å‡ºåˆ—è¡¨ä¸­çš„å…³é”®ç‚¹ã€‚
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šbuildings = [[0,2,3],[2,5,3]]
//è¾“å‡ºï¼š[[0,3],[5,0]]
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= buildings.length <= 104
// 0 <= lefti < righti <= 231 - 1
// 1 <= heighti <= 231 - 1
// buildings æŒ‰ lefti éé€’å‡æ’åº
//
// Related Topics æ ‘çŠ¶æ•°ç»„ çº¿æ®µæ ‘ æ•°ç»„ åˆ†æ²» æœ‰åºé›†åˆ æ‰«æçº¿ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
// ğŸ‘ 430 ğŸ‘ 0

package com.cute.leetcode.editor.cn;

import java.util.*;

public class TheSkylineProblem {
    public static void main(String[] args) {
        Solution solution = new TheSkylineProblem().new Solution();
        int[][] buildings = new int[][]{{2, 9, 10}, {3, 7, 15}, {5, 12, 12}, {15, 20, 10}, {19, 24, 8}};
        System.out.println(solution.getSkyline(buildings));
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        //æ€è·¯ä¸€ï¼š
        //é¢˜æ„åˆ†æï¼š
        //è¾“å‡ºç‚¹åæ ‡è¦æ±‚
        //ä¸‹ä¸€ä¸ªç‚¹ä¸å½“å‰èŠ‚ç‚¹é«˜åº¦ä¸åŒï¼Œèƒ½é€šè¿‡ä¸¤ä¸ªèŠ‚ç‚¹ç¡®å®šä¸€æ¡å•æ‹ç‚¹ç›´çº¿
        //è¾¹ç•Œæƒ…å†µï¼šç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç¬¬ä¸€ä¸ªç‚¹çš„æ¨ªåæ ‡ä»¥åŠå…¶é«˜åº¦ï¼Œæœ€åä¸€ç‚¹çš„ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„æ¨ªåæ ‡å’Œ0
        //å…¶å®åˆ†æä¸€ä¸‹å‘ç°ï¼Œæˆ‘ä»¬è¦æ‰¾çš„å…¶å®æ˜¯æ¯ä¸ªåŒºé—´çš„æœ€é«˜é«˜åº¦ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæœ€é«˜é«˜åº¦çš„å˜åŒ–è¿›è¡Œåˆ—è¡¨è¾“å‡º
        //é€šè¿‡Mapè¿›è¡Œå­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„æœ€é«˜é«˜åº¦å§
        //mapå¥½åƒæ²¡å•¥å¤§ç”¨ä¸å¦‚list
        //ä¸€ä¸ªæœ€å¤§æ•´æ•°æ®µç›´æ¥å†…å­˜æº¢å‡ºäº†
       /* public List<List<Integer>> getSkyline(int[][] buildings) {
            List<List<Integer>> res = new ArrayList<>();
            //åˆå§‹èŠ‚ç‚¹
            List<Integer> xh = new ArrayList<>();
            for (int i = 0; i < buildings[0][0]; i++) {
                xh.add(0);
            }

            for (int[] nums : buildings
            ) {
                int l = nums[0], r = nums[1], h = nums[2];
                while (l < r) {
                    //TODO è¿™ä¸€éƒ¨åˆ†å¯ä»¥ä¼˜åŒ–
                    while (xh.size() < l) {
                        xh.add(0);
                    }
                    if (xh.size() == l) {
                        xh.add(h);
                    }
                    xh.set(l, Math.max(xh.get(l), h));
                    l++;
                }
            }
            int index = 0;
            //ç¡®ç«‹åˆå§‹èŠ‚ç‚¹
            for (; index < xh.size(); index++) {
                if (xh.get(index) != 0) {
                    List<Integer> start = new ArrayList<>();
                    start.add(index);
                    start.add(xh.get(index));
                    res.add(start);
                    break;
                }
            }
            int temp = xh.get(index);
            while (index < xh.size() - 1) {
                if (xh.get(index) != temp) {
                    List<Integer> node = new ArrayList<>();
                    node.add(index);
                    node.add(xh.get(index));
                    res.add(node);
                    temp = xh.get(index);
                }
                index++;
            }
            List<Integer> end = new ArrayList<>();
            end.add(xh.size());
            end.add(0);
            res.add(end);
            return res;
        }*/
        //ä¼˜åŒ–ä¸€ï¼šå°è¯•ç”¨mapè®°å½•åŒºé—´
        //å¤±è´¥äº† å› ä¸ºæ›´æ–°åŒºé—´çš„æ—¶å€™ä¼šä½¿mapå˜åŒ–
        //çœ‹äº†ä¸‰å¶å¤§ä½¬çš„é¢˜è§£è¿˜æ˜¯æ²¡å¤ªçœ‹æ‡‚é¢„å¤„ç†çš„æ€è·¯ç”±æ¥
        //ä¸è¿‡å¤§æ¦‚æ€è·¯æˆ‘æ¢ä¸€ç§æŒ‰æˆ‘ç†è§£é‡Œæ›´é€šä¿—çš„æ–¹å¼è§£é‡Šä¸€ä¸‹å§
        //1ã€é¦–å…ˆè¦æ˜ç™½é¢˜æ„æ‰“å°çš„ç‚¹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆ
        //  æŒ‰ç…§æ‰«æçº¿è§‚æµ‹å¯ä»¥å‘ç°ï¼Œæ‰“å°çš„ç‚¹æ˜¯æ¯ä¸¤æ¡æ»¡è¶³æ¡ä»¶çš„æ‰«æçº¿å½¢æˆçš„çŸ©å½¢çš„å³ç«¯ç‚¹
        public List<List<Integer>> getSkyline(int[][] buildings) {
            List<List<Integer>> res = new ArrayList<>();
            //è®°å½•æ¯ä¸ªçŸ©å½¢çš„å·¦å³ç«¯ç‚¹ï¼Œä¸ºäº†æ–¹ä¾¿åˆ†è¾¨å·¦å³ç«¯ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹äºheightçš„æ­£è´Ÿå€¼è¿›è¡Œæ ‡æ³¨
            //ä¹Ÿå°±æ˜¯è¯´å½“heightä¸ºè´Ÿä»£è¡¨å·¦ç«¯ç‚¹ï¼Œheightä¸ºæ­£ä»£è¡¨å³ç«¯ç‚¹
            List<int[]> ps = new ArrayList<>();
            for (int[] b : buildings) {
                int l = b[0], r = b[1], h = b[2];
                ps.add(new int[]{l, -h});
                ps.add(new int[]{r, h});
            }
            //æ’åºçš„æ ‡å‡†æ˜¯ä¸ºäº†æŒ‰ç…§æ¨ªåæ ‡è¿›è¡Œæ’åºï¼Œç¡®å®šæ¯ä¸ªæ¨ªåæ ‡çš„ç‚¹ï¼Œç„¶åæŒ‰ç…§
            Collections.sort(ps, new Comparator<int[]>() {
                @Override
                public int compare(int[] a, int[] b) {
                    //æ¨ªåæ ‡æ’åº
                    if (a[0] != b[0]) {
                        return a[0] - b[0];
                    }
                    //é«˜åº¦æ’åº
                    return a[1] - b[1];
                }
            });
            // å¤§æ ¹å †(ä¿è¯)
            PriorityQueue<Integer> q = new PriorityQueue<>((a,b)->b-a);
            int prev = 0;
            q.add(prev);
            for (int[] p : ps) {
                int point = p[0], height = p[1];
                if (height < 0) {
                    // å¦‚æœæ˜¯å·¦ç«¯ç‚¹ï¼Œè¯´æ˜å­˜åœ¨ä¸€æ¡å¾€å³å»¶ä¼¸çš„å¯è®°å½•çš„è¾¹ï¼Œå°†é«˜åº¦å­˜å…¥ä¼˜å…ˆé˜Ÿåˆ—
                    q.add(-height);
                } else {
                    // å¦‚æœæ˜¯å³ç«¯ç‚¹ï¼Œè¯´æ˜è¿™æ¡è¾¹ç»“æŸäº†ï¼Œå°†å½“å‰é«˜åº¦ä»é˜Ÿåˆ—ä¸­ç§»é™¤
                    q.remove(height);
                }

                // å–å‡ºæœ€é«˜é«˜åº¦ï¼Œå¦‚æœå½“å‰ä¸ä¸å‰ä¸€çŸ©å½¢â€œä¸Šè¾¹â€å»¶å±•è€Œæ¥çš„é‚£äº›è¾¹é‡åˆï¼Œåˆ™å¯ä»¥è¢«è®°å½•
                int cur = q.peek();
                if (cur != prev) {
                    List<Integer> list = new ArrayList<>();
                    list.add(point);
                    list.add(cur);
                    res.add(list);
                    prev = cur;
                }
            }
            return res;

        }
    }


//leetcode submit region end(Prohibit modification and deletion)

}